<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<style>
			@import url('https://fonts.googleapis.com/css?family=Roboto');
			</style>
    <script>
      window.onload = function() {
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				var emailBox = document.getElementById('emails');
				var email = document.createElement('div');
				email.className = 'email';
				emailBox.appendChild(email);

				//getEmails to display emails on page

				function getEmails(x, y) {
					for (var i = 0; i < x; i++) {

						// function makeEmailBox(elem, label, content) {
						// 	var label = document.createElement(elem);
						// 	label.className = '';
						// 	label.textContent = y[i].label;
						// }

						var email = document.createElement('div');
						email.className = 'email';
						emailBox.appendChild(email);

						var subject = document.createElement('div');
						subject.className = 'subject';
						subject.textContent = 'Subject: ' + y[i].subject;
						email.appendChild(subject);
						// subject.style.display = 'block';

						var date = document.createElement('div');
						date.className = 'date';
						date.textContent = 'Date: ' + y[i].date;
						subject.appendChild(date);
						// date.style.display = 'none';

						var sender = document.createElement('div');
						sender.className = 'sender';
						sender.textContent = 'Sender: ' + y[i].sender;
						subject.appendChild(sender);
						// sender.style.display = 'none';

						var body = document.createElement('div');
						body.className = 'body';
						body.textContent = y[i].body;
						subject.appendChild(body);
						// body.style.display = 'none';

					}
				}
				getEmails(geemails.length, geemails);

				//

				var emailContainers = document.getElementsByClassName('email');
				var subjectBoxes = document.getElementsByClassName('subject');
				var dateBoxes = document.getElementsByClassName('date');
				var senderBoxes = document.getElementsByClassName('sender');
				var bodyBoxes = document.getElementsByClassName('body');

				// console.log(emailContainers)
				// console.log(subjectBoxes)
				// console.log(dateBoxes)



				for (var i = 0; i < geemails.length; i++) {
					subjectBoxes[i].addEventListener('click', displayMessages); //add click function on every subjectBoxes
				}

				//toggles on and off email boxes

				function displayMessages() {
						// console.log(this)
						// console.log(this.style)
						// console.log(this.children[0])
						// console.log(this.children[0].style.display)
						//this.style is the subject div
						//this.children[0].style is the date div
						// console.log(this.style.display)
						if (this.children[0].style.display === 'block') {
								// console.log('it was block style')
								this.children[0].style.display = 'none';
								this.children[1].style.display = 'none';
								this.children[2].style.display = 'none';
							} else {
								// console.log('it wasnt block style')
								this.children[0].style.display = 'block';
								this.children[1].style.display = 'block';
								this.children[2].style.display = 'block';
						}
				}

					//add default 10 emails for inboxCounter

					var num = 10;
					var inboxCounter = document.getElementById('inboxCounter');
					inboxCounter.textContent = "(" + num + ")";

				setInterval(function() {

					//add 1 to inbox counter every interval. Use ++num is add to inboxCounter then update vs. num++ display update then add 1 to inboxCounter.

					// console.log('before', num)
					inboxCounter.textContent = "(" + ++num + ")";
					// console.log('after', num)

					var newEmail = document.createElement('div');
					newEmail.className = 'newEmail'
					emailBox.prepend(newEmail);
					// console.log(newEmail)

					//Create newEmail boxes for every interval.

					var newSubject = document.createElement('div');
					newSubject.addEventListener('click', displayMessages);
					newSubject.className = 'subject';
					newSubject.textContent = "Subject: " + getNewMessage().subject;
					newEmail.appendChild(newSubject);
					newSubject.style.display = 'block'
				
					var newDate = document.createElement('div');
					newDate.className = 'date';
					newDate.textContent = "Date: " + getNewMessage().date;
					newSubject.appendChild(newDate);
					newDate.style.display = 'none'

					var newSender = document.createElement('div');
					newSender.className = 'sender';
					newSender.textContent = "Sender: " + getNewMessage().sender;
					newSubject.appendChild(newSender);
					newSender.style.display = 'none'
					
					var newBody = document.createElement('div');
					newBody.className = 'body';
					newBody.textContent = getNewMessage().body;
					newSubject.appendChild(newBody);
					newBody.style.display = 'none'

				}, 5000);	
				


				// console.log(getNewMessage().subject)
      };
    </script>
	</head>
	<body>
		<h1 id="title"><img src="http://icons.iconarchive.com/icons/cornmanthe3rd/plex/512/Communication-gmail-icon.png">Gee-Mail <div id="cuz"> cuz...</div></h1>
		<div id="menuItems"> 
			<div class="menuOptions">Compose</div>
			<div class="menuOptions">Inbox <span id="inboxCounter"></span></div>
			<div class="menuOptions">Sent</div>
			<div class="menuOptions">Important</div>
			<div class="menuOptions">Drafts</div>
			<div class="menuOptions">Trash</div>
		</div>
		<div id="emails">
			<!-- emailBox goes here -->
		</div>
	</body>
</html>